machine:
  pre:
    - cd /opt/circleci/.pyenv && git pull && cd -
  python:
    version: 3.6.0
dependencies:
  pre:
    - pip install -U setuptools pip wheel
  override:
    - pip install -U -r requirements.txt -r requirements.test.txt
    - wget -O vnu.zip https://github.com/validator/validator/releases/download/17.2.1/vnu.jar_17.2.1.zip
    - unzip vnu.zip
test:
  override:
    - flake8
    - mypy --silent-imports run.py
    - mypy advent
    - python run.py
    - java -jar dist/vnu.jar --verbose output/index.html
